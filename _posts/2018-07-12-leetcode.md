---
layout: post
title: LeetCode failed to record
date: 2018-07-12 10:26:24.000000000 +09:00
---

åœ¨å®ç°[LeetCode](https://leetcode-cn.com/)çš„é—®é¢˜è®°å½•


* ä¸¤æ•°ä¹‹å’Œ

**æœªé€šè¿‡æ–¹æ¡ˆ**

  åœ¨ä½¿ç”¨ä¸€æ¬¡éå†ï¼Œç„¶åå¯»æ‰¾æ•°ç»„ä¸­æ˜¯å¦åŒ…å« `array.contains(tartget - nums[i])`, å†è·å–`complement`çš„ç´¢å¼•ï¼Œè¯¥ç´¢å¼•å’Œiä¸ç›¸ç­‰ã€‚ä»£ç å¦‚ä¸‹:
   
```
	func twoSum(_ nums: [Int], _ target: Int) -> [Int] {
    
	    for i in 0 ..< nums.count {
	        let complement = target - nums[i]
	        if nums.contains(complement) {
	            if let index = nums.index(of: complement) {
	                if index != i {
	                    return [i, index]
	                }
	            }
	        }
	        
	    }
	    fatalError("No tow sum solution.")
	}
```

æäº¤ä»£ç çš„æ—¶å€™æœªèƒ½é€šè¿‡ç¬¬20çš„testcaseï¼Œ


![ç»“æœ]({{ site.url }}/assets/screenshot/leet-code/p1.jpg)

æ ¹æ®ç»“æœæç¤ºï¼Œæ˜¯åœ¨è¶…å¤§æ•°ç»„çš„æƒ…å†µä¸‹ï¼Œè¯¥ç®—æ³•ä¼šè¶…æ—¶ï¼Œè¯´æ˜åœ¨ä½¿ç”¨Swift Array.contains / Array.indexæ–¹æ³•åœ¨æ€§èƒ½åœ¨å¤§æ•°æ®ä¸‹å­˜åœ¨é—®é¢˜ï¼Œä¸ºæ­¤å»æŸ¥çœ‹[æ–‡æ¡£ä»‹ç»](https://opensource.apple.com/source/CF/CF-550.13/CFArray.h)
> Computational Complexity
> The access time for a value in the array is guaranteed to be at
	worst O(lg N) for any implementation, current and future, but will
	often be O(1) (constant time). Linear search operations similarly
	have a worst case complexity of O(N*lg N), though typically the
	bounds will be tighter, and so on. Insertion or deletion operations
	will typically be linear in the number of values in the array, but
	may be O(N*lg N) clearly in the worst case in some implementations.
	There are no favored positions within the array for performance;
	that is, it is not necessarily faster to access values with low
	indices, or to insert or delete values with high indices, or
	whatever.
	
	â€¢ åœ¨æ•°ç»„ä¸­é€šè¿‡ä¸€ä¸ªç‰¹å®šçš„ç´¢å¼•è·å–å€¼çš„æ—¶é—´å¤æ‚åº¦æœ€åæ˜¯`O(log n)`ï¼Œä½†é€šå¸¸åº”è¯¥æ˜¯`O(1)`ã€‚
	â€¢ æœç´¢ä¸€ä¸ªæœªçŸ¥ç´¢å¼•çš„å¯¹è±¡çš„æ—¶é—´å¤æ‚åº¦æœ€åæ˜¯`O(n (log n))`ï¼Œä½†ä¸€èˆ¬åº”è¯¥æ˜¯`O(n)`ã€‚
	â€¢ æ’å…¥æˆ–è€…åˆ é™¤ä¸€ä¸ªå¯¹è±¡æœ€åçš„æ—¶é—´å¤æ‚åº¦æ˜¯`O(n (log n))`ï¼Œä½†ç»å¸¸æ˜¯`O(1)`
	
	
å› æ­¤éœ€è¦å¯»æ‰¾æ€§èƒ½æ›´å¥½çš„æ–¹æ³•æ˜¯å®ç°ï¼Œ`Java`ä¸­å¯ä½¿ç”¨`HashMap`é«˜æ•ˆçš„åˆ¤æ–­è¡¨ä¸­æ˜¯å¦åŒ…å«æŸä¸ª`obj`ï¼Œå¹¶ä¸”è·å–è¿™ä¸ª`obj`çš„`key`,Swiftä¸­çš„`Dictionary`å¹¶æ²¡æœ‰æä¾›åˆ¤æ–­æ˜¯å¦å­˜åœ¨ç‰¹å®š`value`ï¼Œå¹¶è·å–è¯¥`value`å¯¹åº”çš„`key`ã€‚



**è¿›ä¸€æ­¥å¯»æ‰¾é«˜æ€§èƒ½æ–¹æ¡ˆäºŒ**

ç”±äºæˆ‘çš„ç›®çš„æ˜¯å¯»æ‰¾ç±»ä¼¼äºHashTableçš„é«˜æ€§èƒ½æ£€ç´¢æ–¹æ¡ˆï¼Œè€ŒSwiftçš„é›†åˆç±»å‹éƒ½æ˜¯å±äº`Foundation`æ¡†æ¶ï¼Œ[å‚è€ƒæ–‡ç« ](https://www.jianshu.com/p/94576f18a7b2)(å°å£°è¯´ï¼šæ‰¾åˆ°äº†ä¸€ä¸ªé«˜è´¨é‡çš„ç¿»è¯‘æ–‡ç« )ï¼Œ å‘ç°äº†`NSOrderedSet`é›†åˆç±»å‹ï¼Œå¯¹åº”çš„å¯å˜ç±»å‹ä¸º`NSMutableOrderedSet`ï¼Œæ˜¯ä¸€ç§å…è®¸ä½ ä»¥ç‰¹å®šé¡ºåºå­˜å‚¨ä¸€ç»„ä¸é‡å¤å¯¹è±¡çš„æ•°æ®ç»“æ„ï¼Œå…¶ç›¸å¯¹äºæ•°ç»„çš„åŒºåˆ«åœ¨äºï¼š
> å½“å…ƒç´ é¡ºåºä»¥åŠæµ‹è¯•æŸä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºé›†åˆä¸­çš„æ€§èƒ½å¾ˆé‡è¦æ—¶ï¼Œä½ å¯ä½¿ç”¨æœ‰åºçš„é›†åˆä½œä¸ºæ•°ç»„çš„å¤‡é€‰é¡¹

ğŸ˜†ğŸ˜†ğŸ˜†ï¼Œè¿™ä¸å°±æ˜¯æˆ‘æ­£è¦éœ€è¦çš„å—ï¼Œç«‹é©¬ä¿®æ”¹ä»£ç ï¼Œå°†`nums`æ•°ç»„ä½œä¸ºå‚æ•°åˆ›å»ºä¸€ä¸ª`NSOrderedSet`å¯¹è±¡ï¼Œç„¶åä½¿ç”¨`orderSet`å»æ£€ç´¢`complement`å¹¶è·å–å…¶ç´¢å¼•

```

	func twoSum(_ nums: [Int], _ target: Int) -> [Int] {
        let orderSet = NSOrderedSet(array: nums)
        for i in 0 ..< nums.count {
            let complement = target - nums[i]

            if orderSet.contains(complement) {
                if let index = nums.index(of: complement) {
                    if index != i {
                        return [i, index]
                    }
                }
            }
        }
        fatalError("No tow sum solution.")
    }
```

å†æ¬¡æäº¤ä»£ç é¡ºåˆ©é€šè¿‡æµ‹è¯•ï¼Œå¾—å‡ºç»“æœï¼š
![OrderSetç»“æœ]({{ site.url }}/assets/screenshot/leet-code/p2.jpeg)

**æ–¹æ¡ˆä¸‰**

æƒ³æ³•ï¼š å°†è¾“å…¥æ•°ç»„çš„æ¯ä¸ªå€¼ä½œä¸º`Key`ï¼Œå°†å…¶`Index`ä½œä¸º`Value`ï¼Œå­˜æ”¾åœ¨å­—å…¸ä¸­ï¼Œåˆ©ç”¨`Dictionary`çš„ä»¥ä¸‹ç‰¹æ€§ï¼Œå¯ä»¥å¾ˆå¤§å¯èƒ½è·å–åˆ°`O(1)`çš„æ•ˆæœï¼š

```
	1.	ä»å­—å…¸ä¸­è·å–å€¼çš„æ—¶é—´å¤æ‚åº¦æœ€åæ˜¯O(n)ï¼Œä½†ä¸€èˆ¬åº”è¯¥æ˜¯O(1)ã€‚
	2.	æ’å…¥å’Œåˆ é™¤æ•°æ®çš„æ—¶é—´å¤æ‚åº¦æœ€åæ˜¯O(nÂ²)ï¼Œä½†ç”±äºé¡¶å±‚çš„ä¼˜åŒ–é€šå¸¸æ›´æ¥è¿‘O(1)ã€‚

```

å¾—åˆ°ä»£ç å¦‚ä¸‹ï¼š

```
		func twoSum(_ nums: [Int], _ target: Int) -> [Int] {
	        var dic = [Int: Int]()
	    
	        for index in 0 ..< nums.count {
	            dic[nums[index]] = index
	        }
	
	        for i in 0 ..< nums.count {
	            let complement = target - nums[i]
	            if let index = dic[complement], i != index{
	                return [i, index]
	            }
	        }
	        fatalError("No tow sum solution.")
	    }
```
é¦–å…ˆéå†`nums`ï¼Œå°†`nums[i]`ä½œä¸º`key`ï¼Œ`i`ä½œä¸º`value`å­˜æ”¾åœ¨å­—å…¸ä¸­ï¼Œç„¶åå†è¿›è¡Œä¸€æ¬¡éå†ï¼Œåˆ©ç”¨`complement`ä»å­—å…¸ä¸­å–`index`ï¼Œå¦‚æœå­˜åœ¨`index && index != i`ï¼Œ é‚£ä¹ˆå°±çš„æˆ‘ä»¬éœ€è¦çš„ç»“æœ`[i, index]`ï¼Œ é€šè¿‡æµ‹è¯•ï¼Œæäº¤ç­”æ¡ˆï¼Œå¾—åˆ°é€šè¿‡ç»“æœå¦‚ä¸‹ï¼š

![ç»“æœ]({{ site.url }}/assets/screenshot/leet-code/p3.jpeg)

ç”±ç»“æœå¯ä»¥çœ‹å‡ºè¿™ç§æ–¹å¼åªéœ€è¦24msï¼Œç›¸å¯¹OrderSetæ–¹å¼80msæœ‰äº†3å€å¤šçš„æå‡ï¼Œè¯´æ˜æƒ³æ³•æˆç«‹ã€‚

**æ–¹æ¡ˆå››ï¼šNSMapTable**

åœ¨Swift 4.1ä¸­ä½¿ç”¨ä¸€ä¸‹æ–¹å¼åˆå§‹åŒ–mapTableä¼šå‡ºç°æŠ¥é”™


```
// åˆå§‹åŒ–

let mapTable = NSMapTable<AnyObject, AnyObject>.init(keyOptions: .integerPersonality, valueOptions: .integerPersonality)
```

```
// æŠ¥é”™

libc++abi.dylib: terminating with uncaught exception of type NSException
```

ä½†æ˜¯æ¢æˆä¸‹é¢çš„æ–¹å¼å°±æ²¡æœ‰é—®é¢˜

```
// æˆåŠŸçš„åˆå§‹åŒ–

let mapTable = NSMapTable<AnyObject, AnyObject>(keyOptions: NSPointerFunctions.Options.weakMemory, valueOptions: NSPointerFunctions.Options.weakMemory)
```
äºŒè€…çš„åŒºåˆ«åœ¨äº `.integerPersonality` å’Œ `NSPointerFunctions.Options.weakMemory`ï¼Œéœ€è¦è¿›ä¸€æ­¥æŸ¥çœ‹äºŒè€…çš„åŒºåˆ«ï¼Œ æ˜¯`integerPersonality`ä¸`weakMemory`çš„å…·ä½“è¯­ä¹‰

**LeetCodeç»“æœ**
æ— æ³•è¯†åˆ«NSMapTableç±»ï¼Œçœ‹æ¥å¾—æ¢ä¸ªæ–¹å¼äº†ã€‚

```
Line 5: use of unresolved identifier 'NSMapTable'
```


